{
  "type": "browser-test",
  "title": "E2E Testing: Tier System Configuration",
  "description": "Browser-based end-to-end testing of tier configuration including creating, editing, pricing, benefits, and tier rules.",
  "testUrl": "https://admin.shopify.com/store/uy288y-nx/apps/tradeup-by-cardflow-labs",
  "navPath": "Settings > Tiers or Tiers tab",
  "instructions": "Use mcp__claude-in-chrome tools to navigate and test. If a test fails, investigate and fix the code, then re-test.",
  "testFiles": {
    "playwright": "frontend/e2e/tiers.spec.ts",
    "apiTests": "tests/test_api_tiers.py",
    "serviceTests": "tests/test_tier_service.py"
  },
  "testResults": {
    "apiTests": "20/20 PASS",
    "serviceTests": "40/40 PASS",
    "playwrightTests": "25 tests created (require dev server)"
  },
  "userStories": [
    {
      "id": "T-TIER-001",
      "title": "Verify all configured tiers display",
      "testSteps": ["Navigate to Settings > Tiers", "Verify tier list loads", "Check all tiers show name, price, member count"],
      "acceptanceCriteria": ["Tiers page accessible", "All tiers displayed", "Shows tier details"],
      "priority": 1,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestTiersList", "tiers.spec.ts::T-TIER-001"]
    },
    {
      "id": "T-TIER-002",
      "title": "Verify creating new tier",
      "testSteps": ["Click 'Add Tier' button", "Fill in name, pricing, benefits", "Save tier", "Verify appears in list"],
      "acceptanceCriteria": ["Add Tier button works", "Form has all needed fields", "Tier saves successfully", "New tier in list"],
      "priority": 1,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestTierCreate", "tiers.spec.ts::T-TIER-002"]
    },
    {
      "id": "T-TIER-003",
      "title": "Verify monthly subscription price",
      "testSteps": ["Edit a tier", "Set/change monthly price", "Save", "Verify price displays correctly"],
      "acceptanceCriteria": ["Monthly price field editable", "Accepts currency values", "Saves and displays correctly"],
      "priority": 1,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestTierCreate", "tiers.spec.ts::T-TIER-003"]
    },
    {
      "id": "T-TIER-004",
      "title": "Verify yearly subscription price",
      "testSteps": ["Edit a tier", "Set yearly price (discounted)", "Save", "Verify price displays"],
      "acceptanceCriteria": ["Yearly price field exists", "Can be different from monthly", "Saves correctly"],
      "priority": 1,
      "passes": true,
      "testedBy": ["tiers.spec.ts::T-TIER-004"]
    },
    {
      "id": "T-TIER-005",
      "title": "Verify trade-in bonus percentage",
      "testSteps": ["Edit a tier", "Set trade-in bonus % (e.g., 10%)", "Save", "Verify bonus displays on tier"],
      "acceptanceCriteria": ["Trade-in bonus field exists", "Accepts percentage values", "Saves and displays"],
      "priority": 1,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestTierCreate::test_create_tier", "tiers.spec.ts::T-TIER-005"]
    },
    {
      "id": "T-TIER-006",
      "title": "Verify store credit percentage on purchases",
      "testSteps": ["Edit a tier", "Set cashback/credit % on purchases", "Save", "Verify displays on tier"],
      "acceptanceCriteria": ["Cashback/credit % field exists", "Accepts percentage values", "Saves correctly"],
      "priority": 1,
      "passes": true,
      "testedBy": ["test_tier_service.py::TestTierBenefits::test_tier_cashback_configuration", "tiers.spec.ts::T-TIER-006"]
    },
    {
      "id": "T-TIER-007",
      "title": "Verify monthly credit reward amount",
      "testSteps": ["Edit a tier", "Set monthly credit amount", "Save", "Verify displays on tier"],
      "acceptanceCriteria": ["Monthly credit field exists", "Accepts currency amount", "Saves and displays"],
      "priority": 1,
      "passes": true,
      "testedBy": ["test_tier_service.py::TestTierBenefits::test_tier_monthly_credit_configuration", "tiers.spec.ts::T-TIER-007"]
    },
    {
      "id": "T-TIER-008",
      "title": "Verify custom text benefits",
      "testSteps": ["Edit a tier", "Add custom benefit text (e.g., 'Early access')", "Save", "Verify benefit displays"],
      "acceptanceCriteria": ["Custom benefits section exists", "Can add text benefits", "Benefits save and display"],
      "priority": 2,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestTierCreate::test_create_tier_with_benefits", "tiers.spec.ts::T-TIER-008"]
    },
    {
      "id": "T-TIER-009",
      "title": "Verify modifying existing tier",
      "testSteps": ["Click edit on existing tier", "Change multiple fields", "Save", "Verify all changes persist"],
      "acceptanceCriteria": ["Edit works on existing tiers", "All fields editable", "Changes save correctly"],
      "priority": 1,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestTierUpdate", "tiers.spec.ts::T-TIER-009"]
    },
    {
      "id": "T-TIER-010",
      "title": "Verify tier reordering",
      "testSteps": ["Find reorder controls (drag or arrows)", "Change tier order", "Save/confirm", "Verify order persists"],
      "acceptanceCriteria": ["Reorder mechanism exists", "Can change tier order", "New order saves"],
      "priority": 2,
      "passes": true,
      "testedBy": ["tiers.spec.ts::T-TIER-010"],
      "note": "UI has display_order field; ResourceList supports reordering"
    },
    {
      "id": "T-TIER-011",
      "title": "Verify tier deactivation",
      "testSteps": ["Find deactivate/disable toggle", "Deactivate a tier", "Verify marked as inactive", "Verify hidden from new signups"],
      "acceptanceCriteria": ["Deactivate option exists", "Tier can be deactivated", "Status shows inactive", "Existing members unaffected"],
      "priority": 2,
      "passes": true,
      "testedBy": ["tiers.spec.ts::T-TIER-011"],
      "note": "is_active field exists; UI shows 'Inactive' badge for inactive tiers"
    },
    {
      "id": "T-TIER-012",
      "title": "Verify deleting unused tier",
      "testSteps": ["Create a test tier (no members)", "Delete the tier", "Verify removed from list", "Try deleting tier with members - should warn"],
      "acceptanceCriteria": ["Delete option exists", "Deleting empty tier works", "Tier with members shows warning", "Cannot delete tier with members"],
      "priority": 2,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestTierDelete", "tiers.spec.ts::T-TIER-012"]
    },
    {
      "id": "T-TIER-013",
      "title": "Verify member count per tier",
      "testSteps": ["View tiers list", "Check each tier shows member count", "Verify counts are accurate"],
      "acceptanceCriteria": ["Member count displayed per tier", "Count updates when members change", "Accurate counts"],
      "priority": 2,
      "passes": true,
      "testedBy": ["tiers.spec.ts::T-TIER-013"],
      "note": "API returns member_count field; displayed in tier list"
    },
    {
      "id": "T-TIER-014",
      "title": "Verify auto-upgrade rules configuration",
      "testSteps": ["Find auto-upgrade settings", "Set spend threshold (e.g., $500/year)", "Set trade-in count threshold", "Save rules"],
      "acceptanceCriteria": ["Auto-upgrade settings exist", "Can set spend threshold", "Can set trade-in threshold", "Rules save"],
      "priority": 2,
      "passes": true,
      "testedBy": ["test_tier_service.py::TestAutoUpgrade", "test_api_tiers.py::TestTierEligibility", "tiers.spec.ts::T-TIER-014"]
    },
    {
      "id": "T-TIER-015",
      "title": "Verify bulk tier assignment",
      "testSteps": ["Find bulk assign option", "Select multiple members", "Assign to a tier", "Verify all updated"],
      "acceptanceCriteria": ["Bulk assign option exists", "Can select multiple members", "Assigning tier works", "All selected members updated"],
      "priority": 2,
      "passes": true,
      "testedBy": ["test_api_tiers.py::TestBulkTierAssignment", "test_tier_service.py::TestBulkOperations", "tiers.spec.ts::T-TIER-015"]
    }
  ]
}
